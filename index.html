<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>coba datatables</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap4.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.0/css/buttons.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.0/css/buttons.bootstrap4.min.css" />

  </head>
  <body>
    <table id="tabel-data" class="table table-striped table-bordered w-100" cellspacing="0">
      <thead>
        <tr>
          <th>Name</th>
          <th>Position</th>
          <th>Office</th>
          <th>Ext</th>
          <th>Start date</th>
          <th>Salary</th>
          <th>action</th>
        </tr>
      </thead>
    </table>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <form method="POST" action="">
                  <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Detail Form</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                      </button>
                  </div>
                  <div class="modal-body">
                      <div class="form-group">
                          <label for="name">Name</label>
                          <input type="text" class="form-control form-control-sm" id="name" />
                      </div>
                      <div class="form-group">
                          <label for="position">Position</label>
                          <input type="text" class="form-control form-control-sm" id="position" />
                      </div>
                      <div class="form-group">
                          <label for="salary">Salary</label>
                          <input type="text" class="form-control form-control-sm" id="salary" />
                      </div>
                      <div class="form-group">
                          <label for="startDate">Start Date</label>
                          <input type="text" class="form-control form-control-sm" id="startDate" />
                      </div>
                      <div class="form-group">
                          <label for="office">Office</label>
                          <input type="text" class="form-control form-control-sm" id="office" />
                      </div>
                      <div class="form-group">
                          <label for="extension">Extension</label>
                          <input type="text" class="form-control form-control-sm" id="extension" />
                      </div>
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary" data-dismiss="modal">Save</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
  
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    <script>
      $(document).ready(function () {
        var t = $('#tabel-data').DataTable({
          dom: "<'row'<'col-sm-2 col-md-1'B><'col-sm-10 col-md-3'l><'col-sm-12 col-md-8'f>>" +
    "<'row'<'col-sm-12'tr>>" +
    "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
buttons: [{
    text: '<span class="fa fa-plus"></span>',
    action: function(e, db, node, config) {
        window.location = "add.html";
    }
}],
 "pagingType": "simple",
 "ajax": "http://localhost:5555/employee",
                "columns": [
                    { "data": "name" },
                    { "data": "position" },
                    { "data": "office" },
                    { "data": "extn" },
                    { "data": "start_date" },
                    { "data": "salary" },
                    { render: function( data, type, row, meta ) {
                      return `<button class="btn btn-info btn-sm" data-toggle="modal" data-target="#exampleModal" name="infoBtn"><i class="fa fa-eye"></i></button>
<button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#exampleModal" name="editBtn"><i class="fa fa-edit"></i></button>
<button class="btn btn-danger btn-sm" onclick="confirm('Are you sure to delete data of ${row['name']}?')"><i class="fa fa-trash"></i></button>`;
} },

                ] 
});
$('#exampleModal').on('show.bs.modal', function(event) {
                var button = $(event.relatedTarget);
                var data = t.row(button.parents('tr')).data();
                var modal = $(this);
                if(button.attr('name')==='infoBtn') {
                    modal.find('input').attr('readonly', true);
                } else {
                    modal.find('input').removeAttr('readonly');
                }
                modal.find('#name').val(data['name']);
                modal.find('#position').val(data['position']);
                modal.find('#salary').val(data['salary']);
                modal.find('#startDate').val(data['start_date']);
                modal.find('#office').val(data['office']);
                modal.find('#extension').val(data['extension']);
            }); 
              
      });
          
    </script>
    <script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.bootstrap4.min.js"></script>

  </body>
</html>
